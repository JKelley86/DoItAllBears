<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blitzit - Focus Task Manager</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            -webkit-font-smoothing: antialiased;
        }
        
        .task-urgent { border-left: 4px solid #ef4444; }
        .task-semi-urgent { border-left: 4px solid #f59e0b; }
        .task-not-urgent { border-left: 4px solid #10b981; }
        
        .blitz-shadow {
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1);
        }
        
        .blitz-shadow-lg {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // REPLACE THESE WITH YOUR FIREBASE CONFIG
        const firebaseConfig = {
            apiKey: "AIzaSyDSVL3g2WINSdnT41O4QhkOhuh5CGRGEPs",
            authDomain: "task-manager-e9cd9.firebaseapp.com",
            databaseURL: "https://task-manager-e9cd9-default-rtdb.firebaseio.com",
            projectId: "task-manager-e9cd9",
            storageBucket: "task-manager-e9cd9.firebasestorage.app",
            messagingSenderId: "38849678992",
            appId: "1:38849678992:web:f39c4937951853fb29d215"
        };

        // Initialize Firebase
        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }
        const auth = firebase.auth();
        const database = firebase.database();

        // Icons
        const Calendar = (props) => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: props.size || 24, height: props.size || 24, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className: props.className }, React.createElement('rect', { x: "3", y: "4", width: "18", height: "18", rx: "2", ry: "2" }), React.createElement('line', { x1: "16", y1: "2", x2: "16", y2: "6" }), React.createElement('line', { x1: "8", y1: "2", x2: "8", y2: "6" }), React.createElement('line', { x1: "3", y1: "10", x2: "21", y2: "10" }));
        const Clock = (props) => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: props.size || 24, height: props.size || 24, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className: props.className }, React.createElement('circle', { cx: "12", cy: "12", r: "10" }), React.createElement('polyline', { points: "12 6 12 12 16 14" }));
        const Play = (props) => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: props.size || 24, height: props.size || 24, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className: props.className }, React.createElement('polygon', { points: "5 3 19 12 5 21 5 3" }));
        const Pause = (props) => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: props.size || 24, height: props.size || 24, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className: props.className }, React.createElement('rect', { x: "6", y: "4", width: "4", height: "16" }), React.createElement('rect', { x: "14", y: "4", width: "4", height: "16" }));
        const X = (props) => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: props.size || 24, height: props.size || 24, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className: props.className }, React.createElement('line', { x1: "18", y1: "6", x2: "6", y2: "18" }), React.createElement('line', { x1: "6", y1: "6", x2: "18", y2: "18" }));
        const GripVertical = (props) => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: props.size || 24, height: props.size || 24, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className: props.className }, React.createElement('circle', { cx: "9", cy: "12", r: "1" }), React.createElement('circle', { cx: "9", cy: "5", r: "1" }), React.createElement('circle', { cx: "9", cy: "19", r: "1" }), React.createElement('circle', { cx: "15", cy: "12", r: "1" }), React.createElement('circle', { cx: "15", cy: "5", r: "1" }), React.createElement('circle', { cx: "15", cy: "19", r: "1" }));
        const Plus = (props) => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: props.size || 24, height: props.size || 24, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className: props.className }, React.createElement('line', { x1: "12", y1: "5", x2: "12", y2: "19" }), React.createElement('line', { x1: "5", y1: "12", x2: "19", y2: "12" }));
        const Check = (props) => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: props.size || 24, height: props.size || 24, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className: props.className }, React.createElement('polyline', { points: "20 6 9 17 4 12" }));
        const ChevronLeft = (props) => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: props.size || 24, height: props.size || 24, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className: props.className }, React.createElement('polyline', { points: "15 18 9 12 15 6" }));
        const ChevronRight = (props) => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: props.size || 24, height: props.size || 24, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className: props.className }, React.createElement('polyline', { points: "9 18 15 12 9 6" }));
        const LogOut = (props) => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: props.size || 24, height: props.size || 24, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className: props.className }, React.createElement('path', { d: "M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" }), React.createElement('polyline', { points: "16 17 21 12 16 7" }), React.createElement('line', { x1: "21", y1: "12", x2: "9", y2: "12" }));

        const FocusTaskManager = () => {
            const [user, setUser] = useState(null);
            const [email, setEmail] = useState('');
            const [password, setPassword] = useState('');
            const [tasks, setTasks] = useState([]);
            const [newTaskTitle, setNewTaskTitle] = useState('');
            const [newTaskTime, setNewTaskTime] = useState(30);
            const [newTaskDate, setNewTaskDate] = useState(new Date().toISOString().split('T')[0]);
            const [newTaskUrgency, setNewTaskUrgency] = useState('not-urgent');
            const [draggedTask, setDraggedTask] = useState(null);
            const [view, setView] = useState('today');
            const [selectedDate, setSelectedDate] = useState(new Date());
            const [focusMode, setFocusMode] = useState(null);
            const [timerSeconds, setTimerSeconds] = useState(0);
            const [isTimerRunning, setIsTimerRunning] = useState(false);
            const [isMinimized, setIsMinimized] = useState(false);
            const [loading, setLoading] = useState(true);
            const timerRef = useRef(null);

            useEffect(() => {
                const unsubscribe = auth.onAuthStateChanged((user) => {
                    setUser(user);
                    setLoading(false);
                });
                return () => unsubscribe();
            }, []);

            useEffect(() => {
                if (user) {
                    const tasksRef = database.ref(`users/${user.uid}/tasks`);
                    tasksRef.on('value', (snapshot) => {
                        const data = snapshot.val();
                        if (data) {
                            const taskArray = Object.keys(data).map(key => ({
                                id: key,
                                ...data[key]
                            }));
                            setTasks(taskArray);
                        } else {
                            setTasks([]);
                        }
                    });
                    return () => tasksRef.off();
                }
            }, [user]);

            useEffect(() => {
                if (isTimerRunning && focusMode) {
                    timerRef.current = setInterval(() => {
                        setTimerSeconds(prev => {
                            if (prev >= focusMode.time * 60) {
                                setIsTimerRunning(false);
                                return prev;
                            }
                            return prev + 1;
                        });
                    }, 1000);
                } else {
                    if (timerRef.current) clearInterval(timerRef.current);
                }
                return () => {
                    if (timerRef.current) clearInterval(timerRef.current);
                };
            }, [isTimerRunning, focusMode]);

            const signUp = async () => {
                try {
                    await auth.createUserWithEmailAndPassword(email, password);
                } catch (error) {
                    alert(error.message);
                }
            };

            const signIn = async () => {
                try {
                    await auth.signInWithEmailAndPassword(email, password);
                } catch (error) {
                    alert(error.message);
                }
            };

            const signOut = async () => {
                await auth.signOut();
                setTasks([]);
            };

            const addTask = async () => {
                if (newTaskTitle.trim() && user) {
                    const newTaskRef = database.ref(`users/${user.uid}/tasks`).push();
                    await newTaskRef.set({
                        title: newTaskTitle,
                        time: newTaskTime,
                        urgency: newTaskUrgency,
                        completed: false,
                        date: newTaskDate,
                        createdAt: Date.now()
                    });
                    setNewTaskTitle('');
                    setNewTaskTime(30);
                    setNewTaskUrgency('not-urgent');
                }
            };

            const completeTask = async (id) => {
                if (user) {
                    await database.ref(`users/${user.uid}/tasks/${id}`).update({ completed: true });
                }
            };

            const deleteTask = async (id) => {
                if (user) {
                    await database.ref(`users/${user.uid}/tasks/${id}`).remove();
                }
            };

            const handleDragStart = (task) => {
                setDraggedTask(task);
            };

            const handleDragOver = (e, targetTask) => {
                e.preventDefault();
                if (draggedTask && draggedTask.id !== targetTask.id) {
                    const draggedIdx = tasks.findIndex(t => t.id === draggedTask.id);
                    const targetIdx = tasks.findIndex(t => t.id === targetTask.id);
                    const newTasks = [...tasks];
                    newTasks.splice(draggedIdx, 1);
                    newTasks.splice(targetIdx, 0, draggedTask);
                    setTasks(newTasks);
                }
            };

            const startFocusMode = (task) => {
                setFocusMode(task);
                setTimerSeconds(0);
                setIsTimerRunning(true);
                setIsMinimized(false);
            };

            const exitFocusMode = () => {
                setFocusMode(null);
                setTimerSeconds(0);
                setIsTimerRunning(false);
                setIsMinimized(false);
            };

            const formatTime = (seconds) => {
                const mins = Math.floor(seconds / 60);
                const secs = seconds % 60;
                return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            };

            const getUrgencyClass = (urgency) => {
                switch(urgency) {
                    case 'urgent': return 'task-urgent';
                    case 'semi-urgent': return 'task-semi-urgent';
                    case 'not-urgent': return 'task-not-urgent';
                    default: return 'task-not-urgent';
                }
            };

            const getUrgencyColor = (urgency) => {
                switch(urgency) {
                    case 'urgent': return 'bg-red-500';
                    case 'semi-urgent': return 'bg-amber-500';
                    case 'not-urgent': return 'bg-green-500';
                    default: return 'bg-green-500';
                }
            };

            const activeTasks = tasks.filter(t => !t.completed && t.date === (view === 'today' ? new Date().toISOString().split('T')[0] : selectedDate.toISOString().split('T')[0]));
            const completedTasks = tasks.filter(t => t.completed && t.date === (view === 'today' ? new Date().toISOString().split('T')[0] : selectedDate.toISOString().split('T')[0]));

            const getDaysInMonth = (date) => {
                const year = date.getFullYear();
                const month = date.getMonth();
                const firstDay = new Date(year, month, 1);
                const lastDay = new Date(year, month + 1, 0);
                const daysInMonth = lastDay.getDate();
                const startingDayOfWeek = firstDay.getDay();
                return { daysInMonth, startingDayOfWeek };
            };

            const changeMonth = (direction) => {
                setSelectedDate(new Date(selectedDate.getFullYear(), selectedDate.getMonth() + direction, 1));
            };

            const getTasksForDate = (date) => {
                const dateStr = date.toISOString().split('T')[0];
                return tasks.filter(t => t.date === dateStr).length;
            };

            if (loading) {
                return (
                    <div className="min-h-screen bg-white flex items-center justify-center">
                        <div className="text-gray-400 text-lg">Loading...</div>
                    </div>
                );
            }

            if (!user) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center p-6">
                        <div className="bg-white rounded-xl blitz-shadow-lg p-8 w-full max-w-md">
                            <h1 className="text-3xl font-bold text-gray-900 mb-2">Blitzit</h1>
                            <p className="text-gray-500 mb-6">Focus. Prioritize. Get things done.</p>
                            <input
                                type="email"
                                value={email}
                                onChange={(e) => setEmail(e.target.value)}
                                placeholder="Email"
                                className="w-full px-4 py-3 border border-gray-200 rounded-lg mb-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            />
                            <input
                                type="password"
                                value={password}
                                onChange={(e) => setPassword(e.target.value)}
                                placeholder="Password"
                                className="w-full px-4 py-3 border border-gray-200 rounded-lg mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            />
                            <div className="flex gap-3">
                                <button
                                    onClick={signIn}
                                    className="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg py-3 transition"
                                >
                                    Sign In
                                </button>
                                <button
                                    onClick={signUp}
                                    className="flex-1 bg-gray-100 hover:bg-gray-200 text-gray-800 font-medium rounded-lg py-3 transition"
                                >
                                    Sign Up
                                </button>
                            </div>
                            <p className="text-xs text-gray-400 mt-4 text-center">
                                Configure Firebase in the code to enable sync
                            </p>
                        </div>
                    </div>
                );
            }

            if (focusMode && isMinimized) {
                return (
                    <div className="fixed top-4 right-4 bg-gray-900 text-white rounded-lg blitz-shadow-lg p-4 z-50" style={{ width: '220px' }}>
                        <div className="flex items-center justify-between mb-2">
                            <span className="text-sm font-medium truncate flex-1">{focusMode.title}</span>
                            <button onClick={() => setIsMinimized(false)} className="ml-2 hover:bg-gray-800 rounded p-1">
                                <ChevronLeft size={16} />
                            </button>
                        </div>
                        <div className="text-4xl font-bold text-center mb-3 tracking-tight">
                            {formatTime(timerSeconds)}
                        </div>
                        <div className="flex gap-2">
                            <button 
                                onClick={() => setIsTimerRunning(!isTimerRunning)}
                                className="flex-1 bg-blue-600 hover:bg-blue-700 rounded-lg py-2 flex items-center justify-center transition"
                            >
                                {isTimerRunning ? <Pause size={16} /> : <Play size={16} />}
                            </button>
                            <button 
                                onClick={exitFocusMode}
                                className="bg-red-600 hover:bg-red-700 rounded-lg py-2 px-3 transition"
                            >
                                <X size={16} />
                            </button>
                        </div>
                    </div>
                );
            }

            if (focusMode) {
                return (
                    <div className="min-h-screen bg-white flex items-center justify-center p-6">
                        <div className="bg-white rounded-2xl blitz-shadow-lg p-12 max-w-2xl w-full border border-gray-100">
                            <div className="flex justify-between items-start mb-10">
                                <div>
                                    <h1 className="text-4xl font-bold text-gray-900 mb-2">{focusMode.title}</h1>
                                    <div className={`inline-block ${getUrgencyColor(focusMode.urgency)} text-white text-xs px-2 py-1 rounded`}>
                                        {focusMode.urgency.replace('-', ' ')}
                                    </div>
                                </div>
                                <button onClick={() => setIsMinimized(true)} className="text-gray-400 hover:text-gray-600 transition">
                                    <ChevronRight size={24} />
                                </button>
                            </div>
                            
                            <div className="text-center mb-12">
                                <div className="text-8xl font-bold text-gray-900 mb-4 tracking-tight">
                                    {formatTime(timerSeconds)}
                                </div>
                                <div className="text-lg text-gray-500">
                                    of {focusMode.time} minutes
                                </div>
                                <div className="mt-6 bg-gray-100 rounded-full h-2 overflow-hidden">
                                    <div 
                                        className="bg-blue-600 h-full transition-all duration-300"
                                        style={{ width: `${Math.min((timerSeconds / (focusMode.time * 60)) * 100, 100)}%` }}
                                    />
                                </div>
                            </div>

                            <div className="flex gap-3">
                                <button 
                                    onClick={() => setIsTimerRunning(!isTimerRunning)}
                                    className="flex-1 bg-blue-600 hover:bg-blue-700 text-white rounded-xl py-4 px-6 flex items-center justify-center gap-3 font-medium transition"
                                >
                                    {isTimerRunning ? (
                                        <>
                                            <Pause size={20} />
                                            <span>Pause</span>
                                        </>
                                    ) : (
                                        <>
                                            <Play size={20} />
                                            <span>Start</span>
                                        </>
                                    )}
                                </button>
                                <button 
                                    onClick={() => completeTask(focusMode.id)}
                                    className="flex-1 bg-green-600 hover:bg-green-700 text-white rounded-xl py-4 px-6 flex items-center justify-center gap-3 font-medium transition"
                                >
                                    <Check size={20} />
                                    <span>Complete</span>
                                </button>
                                <button 
                                    onClick={exitFocusMode}
                                    className="bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl py-4 px-6 flex items-center justify-center font-medium transition"
                                >
                                    <X size={20} />
                                </button>
                            </div>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen bg-white">
                    <div className="max-w-6xl mx-auto p-6">
                        <header className="mb-8 flex justify-between items-center">
                            <div>
                                <h1 className="text-3xl font-bold text-gray-900 mb-1">Blitzit</h1>
                                <p className="text-sm text-gray-500">{user.email}</p>
                            </div>
                            <button
                                onClick={signOut}
                                className="flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-900 transition"
                            >
                                <LogOut size={18} />
                                <span className="text-sm font-medium">Sign Out</span>
                            </button>
                        </header>

                        <div className="flex gap-2 mb-6">
                            <button 
                                onClick={() => setView('today')}
                                className={`px-5 py-2.5 rounded-lg font-medium text-sm transition ${view === 'today' ? 'bg-gray-900 text-white' : 'bg-gray-50 text-gray-700 hover:bg-gray-100'}`}
                            >
                                Today
                            </button>
                            <button 
                                onClick={() => setView('calendar')}
                                className={`px-5 py-2.5 rounded-lg font-medium text-sm transition flex items-center gap-2 ${view === 'calendar' ? 'bg-gray-900 text-white' : 'bg-gray-50 text-gray-700 hover:bg-gray-100'}`}
                            >
                                <Calendar size={16} />
                                <span>Calendar</span>
                            </button>
                        </div>

                        {view === 'calendar' && (
                            <div className="bg-white rounded-xl blitz-shadow border border-gray-100 p-6 mb-6">
                                <div className="flex items-center justify-between mb-6">
                                    <button onClick={() => changeMonth(-1)} className="p-2 hover:bg-gray-50 rounded-lg transition">
                                        <ChevronLeft size={20} />
                                    </button>
                                    <h2 className="text-lg font-semibold text-gray-900">
                                        {selectedDate.toLocaleDateString('en-US', { month: 'long', year: 'numeric' })}
                                    </h2>
                                    <button onClick={() => changeMonth(1)} className="p-2 hover:bg-gray-50 rounded-lg transition">
                                        <ChevronRight size={20} />
                                    </button>
                                </div>
                                
                                <div className="grid grid-cols-7 gap-2">
                                    {['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].map(day => (
                                        <div key={day} className="text-center text-xs font-semibold text-gray-500 py-2">
                                            {day}
                                        </div>
                                    ))}
                                    
                                    {(() => {
                                        const { daysInMonth, startingDayOfWeek } = getDaysInMonth(selectedDate);
                                        const days = [];
                                        
                                        for (let i = 0; i < startingDayOfWeek; i++) {
                                            days.push(<div key={`empty-${i}`} />);
                                        }
                                        
                                        for (let day = 1; day <= daysInMonth; day++) {
                                            const date = new Date(selectedDate.getFullYear(), selectedDate.getMonth(), day);
                                            const taskCount = getTasksForDate(date);
                                            const isSelected = date.toISOString().split('T')[0] === selectedDate.toISOString().split('T')[0];
                                            
                                            days.push(
                                                <button
                                                    key={day}
                                                    onClick={() => setSelectedDate(date)}
                                                    className={`aspect-square p-2 rounded-lg text-sm transition ${
                                                        isSelected 
                                                            ? 'bg-gray-900 text-white' 
                                                            : 'hover:bg-gray-50'
                                                    }`}
                                                >
                                                    <div className="font-medium">{day}</div>
                                                    {taskCount > 0 && (
                                                        <div className={`text-xs mt-1 ${isSelected ? 'text-gray-300' : 'text-blue-600'}`}>
                                                            {taskCount}
                                                        </div>
                                                    )}
                                                </button>
                                            );
                                        }
                                        
                                        return days;
                                    })()}
                                </div>
                            </div>
                        )}

                        <div className="bg-white rounded-xl blitz-shadow border border-gray-100 p-6 mb-6">
                            <h2 className="text-lg font-semibold text-gray-900 mb-4">Add New Task</h2>
                            <div className="space-y-3">
                                <input
                                    type="text"
                                    value={newTaskTitle}
                                    onChange={(e) => setNewTaskTitle(e.target.value)}
                                    placeholder="What needs to be done?"
                                    className="w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"
                                    onKeyPress={(e) => e.key === 'Enter' && addTask()}
                                />
                                <div className="flex gap-3 flex-wrap">
                                    <div className="flex items-center gap-2">
                                        <Clock size={18} className="text-gray-400" />
                                        <input
                                            type="number"
                                            value={newTaskTime}
                                            onChange={(e) => setNewTaskTime(parseInt(e.target.value) || 0)}
                                            className="w-20 px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"
                                        />
                                        <span className="text-sm text-gray-600">min</span>
                                    </div>
                                    <input
                                        type="date"
                                        value={newTaskDate}
                                        onChange={(e) => setNewTaskDate(e.target.value)}
                                        className="px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"
                                    />
                                    <select
                                        value={newTaskUrgency}
                                        onChange={(e) => setNewTaskUrgency(e.target.value)}
                                        className="px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"
                                    >
                                        <option value="urgent">游댮 Urgent</option>
                                        <option value="semi-urgent">游리 Semi-Urgent</option>
                                        <option value="not-urgent">游릭 Not Urgent</option>
                                    </select>
                                    <button
                                        onClick={addTask}
                                        className="ml-auto bg-gray-900 hover:bg-gray-800 text-white rounded-lg px-6 py-2 flex items-center gap-2 font-medium text-sm transition"
                                    >
                                        <Plus size={18} />
                                        <span>Add Task</span>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div>
                                <h2 className="text-lg font-semibold text-gray-900 mb-4">Active Tasks</h2>
                                {activeTasks.length === 0 ? (
                                    <div className="bg-gray-50 rounded-xl p-12 text-center">
                                        <p className="text-gray-400">No active tasks</p>
                                    </div>
                                ) : (
                                    <div className="space-y-3">
                                        {activeTasks.map(task => (
                                            <div
                                                key={task.id}
                                                draggable
                                                onDragStart={() => handleDragStart(task)}
                                                onDragOver={(e) => handleDragOver(e, task)}
                                                className={`bg-white blitz-shadow border border-gray-100 rounded-xl p-4 cursor-move hover:shadow-md transition ${getUrgencyClass(task.urgency)}`}
                                            >
                                                <div className="flex items-start gap-3">
                                                    <GripVertical className="text-gray-300 mt-1 flex-shrink-0" size={18} />
                                                    <div className="flex-1 min-w-0">
                                                        <h3 className="font-medium text-gray-900 mb-2">{task.title}</h3>
                                                        <div className="flex items-center gap-3 text-xs text-gray-500">
                                                            <div className="flex items-center gap-1">
                                                                <Clock size={14} />
                                                                <span>{task.time} min</span>
                                                            </div>
                                                            <div className={`${getUrgencyColor(task.urgency)} text-white px-2 py-0.5 rounded`}>
                                                                {task.urgency === 'urgent' ? '游댮' : task.urgency === 'semi-urgent' ? '游리' : '游릭'}
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div className="flex gap-2 flex-shrink-0">
                                                        <button
                                                            onClick={() => startFocusMode(task)}
                                                            className="bg-blue-600 hover:bg-blue-700 text-white rounded-lg p-2 transition"
                                                            title="Focus"
                                                        >
                                                            <Play size={16} />
                                                        </button>
                                                        <button
                                                            onClick={() => completeTask(task.id)}
                                                            className="bg-green-600 hover:bg-green-700 text-white rounded-lg p-2 transition"
                                                            title="Complete"
                                                        >
                                                            <Check size={16} />
                                                        </button>
                                                        <button
                                                            onClick={() => deleteTask(task.id)}
                                                            className="bg-gray-100 hover:bg-gray-200 text-gray-600 rounded-lg p-2 transition"
                                                            title="Delete"
                                                        >
                                                            <X size={16} />
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                )}
                            </div>

                            <div>
                                <h2 className="text-lg font-semibold text-gray-900 mb-4">Completed</h2>
                                {completedTasks.length === 0 ? (
                                    <div className="bg-gray-50 rounded-xl p-12 text-center">
                                        <p className="text-gray-400">No completed tasks</p>
                                    </div>
                                ) : (
                                    <div className="space-y-3">
                                        {completedTasks.map(task => (
                                            <div
                                                key={task.id}
                                                className="bg-gray-50 border border-gray-100 rounded-xl p-4"
                                            >
                                                <div className="flex items-start gap-3">
                                                    <Check className="text-green-600 mt-1 flex-shrink-0" size={18} />
                                                    <div className="flex-1 min-w-0">
                                                        <h3 className="font-medium text-gray-500 mb-2 line-through">{task.title}</h3>
                                                        <div className="flex items-center gap-3 text-xs text-gray-400">
                                                            <div className="flex items-center gap-1">
                                                                <Clock size={14} />
                                                                <span>{task.time} min</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <button
                                                        onClick={() => deleteTask(task.id)}
                                                        className="bg-gray-100 hover:bg-gray-200 text-gray-600 rounded-lg p-2 transition flex-shrink-0"
                                                        title="Delete"
                                                    >
                                                        <X size={16} />
                                                    </button>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<FocusTaskManager />);
    </script>
</body>
</html>
