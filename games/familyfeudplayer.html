<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Family Feud - Player</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <h1>Family Feud</h1>
    <h2 id="question">Waiting for Host...</h2>
    
    <ul id="answers-list"></ul>

    <div class="scoreboard">
      <div>Team A: <span id="teamAScore">0</span></div>
      <div>Team B: <span id="teamBScore">0</span></div>
    </div>
  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyCNttKcvk-xcTV3tw7LbpkPjZcdKpMB9ik",
      authDomain: "familyfeud-9761e.firebaseapp.com",
      projectId: "familyfeud-9761e",
      storageBucket: "familyfeud-9761e.appspot.com",
      messagingSenderId: "131663690095",
      appId: "1:131663690095:web:12b201c2e4c93090cc4f3f",
      measurementId: "G-B2H3EJFTMP",
      databaseURL: "https://familyfeud-9761e-default-rtdb.firebaseio.com"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const questionEl = document.getElementById('question');
    const answersList = document.getElementById('answers-list');
    const teamAScoreEl = document.getElementById('teamAScore');
    const teamBScoreEl = document.getElementById('teamBScore');

    function updateQuestionView(questionData) {
      if (!questionData) return;
      questionEl.textContent = questionData.question || 'Waiting for Host...';

      answersList.innerHTML = '';
      if (questionData.answers) {
        questionData.answers.forEach((ans, index) => {
          const li = document.createElement('li');
          li.textContent = ans.revealed ? `${ans.text} - ${ans.points}` : '---';
          li.classList.toggle('revealed', ans.revealed);
          answersList.appendChild(li);
        });
      }
    }

    db.ref('currentQuestion').on('value', snapshot => {
      const questionData = snapshot.val();
      updateQuestionView(questionData);
    });

    db.ref('scores').on('value', snapshot => {
      const scores = snapshot.val();
      teamAScoreEl.textContent = scores?.teamA || 0;
      teamBScoreEl.textContent = scores?.teamB || 0;
    });
  </script>
</body>
</html>
